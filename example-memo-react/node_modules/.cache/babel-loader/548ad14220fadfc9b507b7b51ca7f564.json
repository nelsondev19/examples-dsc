{"ast":null,"code":"import _toConsumableArray from\"/home/nelson/Escritorio/examples-dsc/example-memo-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/nelson/Escritorio/examples-dsc/example-memo-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useEffect,useState}from\"react\";import axios from\"axios\";import{useInfiniteScroll}from\"../../hooks/useInfiniteScroll\";function Cards(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),Loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],setdata=_useState4[1];var _useState5=useState(10),_useState6=_slicedToArray(_useState5,2),pageNumber=_useState6[0],setpageNumber=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),error=_useState8[0],setError=_useState8[1];var _React$useState=React.useState(null),_React$useState2=_slicedToArray(_React$useState,2),element=_React$useState2[0],setElement=_React$useState2[1];var load=function load(){setTimeout(function(){setpageNumber(pageNumber+10);},300);};useInfiniteScroll({element:element,fetch:load});useEffect(function(){setLoading(true);setError(false);var cancel;axios({method:\"GET\",url:\"https://rickandmortyapi.com/api/character/\",params:{page:pageNumber},cancelToken:new axios.CancelToken(function(c){return cancel=c;})}).then(function(res){setdata(function(prevCharacters){return _toConsumableArray(new Set([].concat(_toConsumableArray(prevCharacters),_toConsumableArray(res.data.results.map(function(b){return b;})))));});setLoading(false);}).catch(function(e){if(axios.isCancel(e))return;setError(true);});return function(){return cancel();};},[pageNumber]);return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(\"ul\",{children:[data.map(function(row){return/*#__PURE__*/_jsx(\"li\",{style:{background:\"orange\"},children:row.name},row.id);}),Loading&&/*#__PURE__*/_jsx(\"li\",{children:\"Cargando...\"}),error&&/*#__PURE__*/_jsx(\"li\",{children:error}),!Loading&&/*#__PURE__*/_jsx(\"li\",{ref:setElement,style:{background:\"transparent\"},children:\"Cargando\"})]})});}export default Cards;","map":{"version":3,"sources":["/home/nelson/Escritorio/examples-dsc/example-memo-react/src/components/Cards/index.js"],"names":["React","useEffect","useState","axios","useInfiniteScroll","Cards","Loading","setLoading","data","setdata","pageNumber","setpageNumber","error","setError","element","setElement","load","setTimeout","fetch","cancel","method","url","params","page","cancelToken","CancelToken","c","then","res","prevCharacters","Set","results","map","b","catch","e","isCancel","row","background","name","id"],"mappings":"4bAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,iBAAT,KAAkC,+BAAlC,CAEA,QAASC,CAAAA,KAAT,EAAiB,eACeH,QAAQ,CAAC,KAAD,CADvB,wCACRI,OADQ,eACCC,UADD,8BAESL,QAAQ,CAAC,EAAD,CAFjB,yCAERM,IAFQ,eAEFC,OAFE,8BAGqBP,QAAQ,CAAC,EAAD,CAH7B,yCAGRQ,UAHQ,eAGIC,aAHJ,8BAIWT,QAAQ,CAAC,KAAD,CAJnB,yCAIRU,KAJQ,eAIDC,QAJC,mCAMeb,KAAK,CAACE,QAAN,CAAe,IAAf,CANf,oDAMRY,OANQ,qBAMCC,UAND,qBAQf,GAAMC,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,EAAM,CACjBC,UAAU,CAAC,UAAM,CACfN,aAAa,CAACD,UAAU,CAAG,EAAd,CAAb,CACD,CAFS,CAEP,GAFO,CAAV,CAGD,CAJD,CAKAN,iBAAiB,CAAC,CAAEU,OAAO,CAAEA,OAAX,CAAoBI,KAAK,CAAEF,IAA3B,CAAD,CAAjB,CAEAf,SAAS,CAAC,UAAM,CACdM,UAAU,CAAC,IAAD,CAAV,CACAM,QAAQ,CAAC,KAAD,CAAR,CACA,GAAIM,CAAAA,MAAJ,CACAhB,KAAK,CAAC,CACJiB,MAAM,CAAE,KADJ,CAEJC,GAAG,CAAE,4CAFD,CAGJC,MAAM,CAAE,CAAEC,IAAI,CAAEb,UAAR,CAHJ,CAIJc,WAAW,CAAE,GAAIrB,CAAAA,KAAK,CAACsB,WAAV,CAAsB,SAACC,CAAD,QAAQP,CAAAA,MAAM,CAAGO,CAAjB,EAAtB,CAJT,CAAD,CAAL,CAMGC,IANH,CAMQ,SAACC,GAAD,CAAS,CACbnB,OAAO,CAAC,SAACoB,cAAD,CAAoB,CAC1B,0BACK,GAAIC,CAAAA,GAAJ,8BAAYD,cAAZ,qBAA+BD,GAAG,CAACpB,IAAJ,CAASuB,OAAT,CAAiBC,GAAjB,CAAqB,SAACC,CAAD,QAAOA,CAAAA,CAAP,EAArB,CAA/B,GADL,EAGD,CAJM,CAAP,CAKA1B,UAAU,CAAC,KAAD,CAAV,CACD,CAbH,EAcG2B,KAdH,CAcS,SAACC,CAAD,CAAO,CACZ,GAAIhC,KAAK,CAACiC,QAAN,CAAeD,CAAf,CAAJ,CAAuB,OACvBtB,QAAQ,CAAC,IAAD,CAAR,CACD,CAjBH,EAkBA,MAAO,kBAAMM,CAAAA,MAAM,EAAZ,EAAP,CACD,CAvBQ,CAuBN,CAACT,UAAD,CAvBM,CAAT,CAyBA,mBACE,YAAK,SAAS,CAAC,KAAf,uBACE,sBACGF,IAAI,CAACwB,GAAL,CAAS,SAACK,GAAD,qBACR,WAAiB,KAAK,CAAE,CAAEC,UAAU,CAAE,QAAd,CAAxB,UACGD,GAAG,CAACE,IADP,EAASF,GAAG,CAACG,EAAb,CADQ,EAAT,CADH,CAOGlC,OAAO,eAAI,mCAPd,CASGM,KAAK,eAAI,oBAAKA,KAAL,EATZ,CAWG,CAACN,OAAD,eACC,WAAI,GAAG,CAAES,UAAT,CAAqB,KAAK,CAAE,CAAEuB,UAAU,CAAE,aAAd,CAA5B,sBAZJ,GADF,EADF,CAqBD,CAED,cAAejC,CAAAA,KAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { useInfiniteScroll } from \"../../hooks/useInfiniteScroll\";\n\nfunction Cards() {\n  const [Loading, setLoading] = useState(false);\n  const [data, setdata] = useState([]);\n  const [pageNumber, setpageNumber] = useState(10);\n  const [error, setError] = useState(false);\n\n  const [element, setElement] = React.useState(null);\n\n  const load = () => {\n    setTimeout(() => {\n      setpageNumber(pageNumber + 10);\n    }, 300);\n  };\n  useInfiniteScroll({ element: element, fetch: load });\n\n  useEffect(() => {\n    setLoading(true);\n    setError(false);\n    let cancel;\n    axios({\n      method: \"GET\",\n      url: \"https://rickandmortyapi.com/api/character/\",\n      params: { page: pageNumber },\n      cancelToken: new axios.CancelToken((c) => (cancel = c)),\n    })\n      .then((res) => {\n        setdata((prevCharacters) => {\n          return [\n            ...new Set([...prevCharacters, ...res.data.results.map((b) => b)]),\n          ];\n        });\n        setLoading(false);\n      })\n      .catch((e) => {\n        if (axios.isCancel(e)) return;\n        setError(true);\n      });\n    return () => cancel();\n  }, [pageNumber]);\n\n  return (\n    <div className=\"App\">\n      <ul>\n        {data.map((row) => (\n          <li key={row.id} style={{ background: \"orange\" }}>\n            {row.name}\n          </li>\n        ))}\n\n        {Loading && <li>Cargando...</li>}\n\n        {error && <li>{error}</li>}\n\n        {!Loading && (\n          <li ref={setElement} style={{ background: \"transparent\" }}>\n            Cargando\n          </li>\n        )}\n      </ul>\n    </div>\n  );\n}\n\nexport default Cards;\n"]},"metadata":{},"sourceType":"module"}